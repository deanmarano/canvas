(function() {

  window.CharacterCanvas = (function() {

    function CharacterCanvas() {
      this.canvas = document.getElementById("characterCanvas");
      this.context = this.canvas.getContext('2d');
      this.imgFunctions = new App.Lib.ImageFunctions;
    }

    CharacterCanvas.prototype.showImage = function(image) {
      this.image = image;
      return this.writeImage();
    };

    CharacterCanvas.prototype.writeImage = function() {
      this.canvas.width = this.image.width();
      this.canvas.height = this.image.height();
      return this.context.putImageData(this.image.imageData, 0, 0);
    };

    CharacterCanvas.prototype.segmentVertical = function() {
      var imageToWrite;
      imageToWrite = this.cloneImage(this.image);
      this.image = this.imgFunctions.segmentVertical(this.image, imageToWrite);
      return this.writeImage();
    };

    CharacterCanvas.prototype.cloneImage = function(sourceImage) {
      var imageData;
      imageData = this.context.createImageData(sourceImage.width(), sourceImage.height());
      imageData.data.set(sourceImage.data());
      return new App.Models.ImageData(imageData);
    };

    return CharacterCanvas;

  })();

}).call(this);
